<!DOCTYPE html>
<html lang="en" th:fragment="layout (content, title)" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title th:replace="${title}"></title>
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="https://vjs.zencdn.net/5-unsafe/video-js.css">
    </head>
    <body>

        <div th:replace="${content}"></div>

<!--        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://vjs.zencdn.net/5-unsafe/video.js"></script>
        <script>
            $(function () {
                $(".sidebar-link").click(function () {
                    $(".sidebar-link").removeClass("is-active");
                    $(this).addClass("is-active");
                });
            });

            $(window)
                    .resize(function () {
                        if ($(window).width() > 1090) {
                            $(".sidebar").removeClass("collapse");
                        } else {
                            $(".sidebar").addClass("collapse");
                        }
                    })
                    .resize();

            const allVideos = document.querySelectorAll(".video");

            allVideos.forEach((v) => {
                v.addEventListener("mouseover", () => {
                    const video = v.querySelector("video");
                    video.play();
                });
                v.addEventListener("mouseleave", () => {
                    const video = v.querySelector("video");
                    video.pause();
                });
            });

            $(function () {
                $(".logo, .logo-expand, .discover").on("click", function (e) {
                    $(".main-container").removeClass("show");
                    $(".main-container").scrollTop(0);
                });
                $(".trending, .video").on("click", function (e) {
                    $(".main-container").addClass("show");
                    $(".main-container").scrollTop(0);
                    $(".sidebar-link").removeClass("is-active");
                    $(".trending").addClass("is-active");
                });

                $(".video").click(function () {
                    var source = $(this).find("source").attr("src");
                    var title = $(this).find(".video-name").text();
                    var person = $(this).find(".video-by").text();
                    var img = $(this).find(".author-img").attr("src");
                    $(".video-stream video").stop();
                    $(".video-stream source").attr("src", source);
                    $(".video-stream video").load();
                    $(".video-p-title").text(title);
                    $(".video-p-name").text(person);
                    $(".video-detail .author-img").attr("src", img);
                });
            });
        </script>
    </body>
</html>